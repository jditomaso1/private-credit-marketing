<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Media Hub ‚Äî Private Credit AI | Daily Private Credit Headlines</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Real-time private credit headlines across direct lending, CLOs, BDCs, NAV loans, and more‚Äîcurated and deduped by Private Credit AI." />
  <link rel="canonical" href="https://private-credit.ai/tools/media-hub.html" />

  <!-- Basic SEO -->
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#2c7cf1" />

  <!-- Social / Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://private-credit.ai/tools/media-hub.html" />
  <meta property="og:title" content="Media Hub ‚Äî Private Credit AI" />
  <meta property="og:description" content="Real-time private credit headlines across direct lending, CLOs, BDCs, NAV loans, and more‚Äîcurated and deduped by Private Credit AI." />
  <meta property="og:image" content="https://private-credit.ai/img/og-media-hub.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Media Hub ‚Äî Private Credit AI" />
  <meta name="twitter:description" content="Real-time private credit headlines across direct lending, CLOs, BDCs, NAV loans, and more‚Äîcurated and deduped by Private Credit AI." />
  <meta name="twitter:image" content="https://private-credit.ai/img/og-media-hub.jpg" />

  <meta property="og:site_name" content="Private Credit AI" />
  <meta name="author" content="Private Credit AI" />
  
  <!-- Perf: fonts preconnect -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- Existing assets -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/png" href="/img/favicon.png?v=8" />

  <style>
    /* Base */
    * { box-sizing: border-box; }
    body { font-family:Poppins, sans-serif; margin:0; background:#f4f4f4; color:#333; }

    /* Page wrapper (same width as tools pages) */
    .page{max-width:1100px;margin:24px auto 0;padding:12px 20px 0}

    /* Tools sub-nav (same as other tool pages) */
    .tool-tabs{margin:0 0 8px;display:flex;gap:8px;flex-wrap:wrap}
    .tool-tab{display:inline-block;padding:10px 14px;border:1px solid #ddd;border-radius:8px;background:#fff;text-decoration:none;color:#111;font-size:14px}
    .tool-tab.active{background:#111;color:#fff;border-color:#111}

    /* === Media Hub === */
    #media-hub { margin:0; padding:0 0 40px; }
    #media-hub a { color:#111; text-decoration:none; }
    #media-hub a:hover { color:#2c7cf1; text-decoration:underline; }

    #media-hub header, #media-hub h1 { margin-top:0; }

    .pill{border:1px solid #d5d8dd;background:#fff;color:#222;border-radius:999px;padding:8px 12px;font-size:13px;cursor:pointer}
    .pill--active{background:#2c7cf1;color:#fff;border-color:#2c7cf1}

    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px}
    @media (max-width: 820px){ .grid{grid-template-columns:1fr} }

    .card{background:#fff;border:1px solid #eee;border-radius:10px;padding:14px;display:block;color:#111}
    .card:hover{box-shadow:0 6px 20px rgba(0,0,0,.08);transform:translateY(-1px);transition:all .15s}
    .card-title{font-weight:600;margin:0 0 6px 0;line-height:1.3}
    .card-meta{font-size:12px;color:#666;margin:0 0 6px 0}
    .card-tags{font-size:12px;color:#666}

    .list a{display:flex;justify-content:space-between;gap:12px;border-bottom:1px solid #eee;padding:10px 0;color:#111}
    .list a:hover{background:#fafbfc}
    .list .right{white-space:nowrap;color:#666;font-size:12px}

    /* Source badges (neutral palette) */
    .badge {
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      font-size:11px;
      line-height:1.6;
      border:1px solid #e5e7eb;
      background:#f9fafb;
      color:#374151;
      margin-right:8px;
      vertical-align:middle;
    }
    .badge .lock { margin-left:4px; opacity:.7; }

    /* Kill any injected refresh button, regardless of how it's added */
    #refresh-btn, button#refresh-btn, .refresh-button, [data-role="refresh"], button[aria-label="Refresh News"] {
      display:none !important;
    }
    
    /* Loader */
    .loader{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px; margin:6px 0 16px;
      background:#fff; border:1px solid #eee; border-radius:10px;
      color:#444; font-size:14px;
    }
    .spinner{
      width:16px; height:16px; border-radius:50%;
      border:2px solid #e5e7eb; border-top-color:#2c7cf1;
      animation:spin 0.8s linear infinite;
    }
    @keyframes spin{ to { transform: rotate(360deg); } }
  </style>

  <style>
    .source-toggles { display:flex; gap:12px; align-items:center; margin: -8px 0 10px; }
    .toggle { font-size:13px; color:#444; }
    .toggle input { vertical-align:middle; margin-right:6px; }
  </style>
  
  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Media Hub ‚Äî Private Credit AI",
    "url": "https://private-credit.ai/tools/media-hub.html",
    "description": "Real-time private credit headlines across direct lending, CLOs, BDCs, NAV loans, and more‚Äîcurated and deduped by Private Credit AI.",
    "publisher": {
      "@type": "Organization",
      "name": "Private Credit AI",
      "url": "https://private-credit.ai",
      "logo": {
        "@type": "ImageObject",
        "url": "https://private-credit.ai/img/favicon.png"
      }
    },
    "inLanguage": "en",
    "isPartOf": {
      "@type": "WebSite",
      "name": "Private Credit AI",
      "url": "https://private-credit.ai"
    }
  }
  </script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6GY4CQ6ZFH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-6GY4CQ6ZFH');
  </script>
</head>
<body>

  <!-- Shared header -->
  <div id="site-header"></div>

  <!-- Tools sub-nav -->
  <main class="page">
    <nav class="tool-tabs" aria-label="Tools">
      <a class="tool-tab" href="/tools/index.html">Tools</a>
      <a class="tool-tab" href="/tools/media-hub.html">Media Hub</a>
      <a class="tool-tab" href="/tools/irr-calculator.html">IRR Calculator</a>
      <a class="tool-tab" href="/tools/yield-curve.html">Yield Curve</a>
      <a class="tool-tab" href="/tools/credit-decoder.html">Credit Decoder</a>
      <a class="tool-tab" href="/tools/loan-pricing.html">Loan Pricing</a>
      <a class="tool-tab" href="/tools/covenant-checker.html">Covenant Checker</a>
      <a class="tool-tab" href="/tools/shadow-ratings-basic.html">Shadow Ratings</a>
      <a class="tool-tab" href="/tools/portfolio-monitor.html">Portfolio Monitor</a>
      <a class="tool-tab" href="/tools/compliance-tracking.html">Compliance Tracking</a>
    </nav>
    <script>
      (function(){
        const here = location.pathname.replace(/\/+$/,'');
        document.querySelectorAll('.tool-tab').forEach(a=>{
          if(a.getAttribute('href')===here){ a.classList.add('active'); }
        });
      })();
    </script>

    <!-- Media Hub -->
    <section id="media-hub">
      <header style="margin-bottom:16px;">
        <h1 style="margin:0 0 6px 0;font-size:32px;font-weight:700;">Media Hub</h1>
        <p style="margin:0;color:#555;">Top headlines in private credit ‚Äî updated hourly. Click to read at the source.</p>
        <p id="last-updated" style="margin-top:8px; color:#666; font-size:13px;"></p>
      </header>
      
      <!-- Loader -->
      <div id="loader" class="loader">
        <div class="spinner" aria-hidden="true"></div>
        <span>Loading latest headlines‚Ä¶</span>
      </div>
      
      <!-- Filters -->
      <nav id="filters" style="display:flex;gap:10px;flex-wrap:wrap;margin:18px 0 12px;">
        <button data-tag="All" class="pill pill--active">All</button>
        <button data-tag="New Deals" class="pill">New Deals</button>
        <button data-tag="Direct Lending" class="pill">Direct Lending</button>
        <button data-tag="CLO" class="pill">CLO</button>
        <button data-tag="NAV" class="pill">NAV</button>
        <button data-tag="BDC" class="pill">BDC</button>
        <button data-tag="ABS" class="pill">ABS</button>
        <button data-tag="Private Equity" class="pill">Private Equity</button>
        <button data-tag="Real Estate" class="pill">Real Estate</button>
        <button data-tag="Infrastructure" class="pill">Infrastructure</button>
        <button data-tag="Emerging Markets" class="pill">Emerging Markets</button>
        <button data-tag="Ratings" class="pill">Ratings</button>
        <button data-tag="Bankruptcy" class="pill">Bankruptcy</button>
      </nav>
      
      <!--
      <div class="source-toggles" style="margin: -6px 0 20px;">
        <label class="toggle">
          <input type="checkbox" id="toggle-sec" checked />
          Include SEC filings
        </label>
      </div>
      -->

      <h3 style="margin:10px 0 12px;font-size:20px;">Top 10 Today</h3>
      <div id="top10" class="grid"></div>

      <h3 style="margin:28px 0 12px;font-size:20px;">All Stories</h3>
      <div id="feed" class="list"></div>
    </section>
  </main>

  <!-- Shared footer -->
  <div id="site-footer"></div>
  <script src="/includes/include.js"></script>

  <!-- App script (single, no nested <script>) -->
  <script>
    // ===== Config =====
    const API = location.origin + '/api/media-feed';
    let _items = [];
    const _loader = document.getElementById('loader');

    // ===== Utilities =====
    function timeAgo(iso){
      const d = new Date(iso);
      const diffMs = Date.now() - d.getTime();
      const m = Math.round(diffMs/60000);
      if (m < 60) return `${m}m`;
      const h = Math.round(m/60);
      if (h < 24) return `${h}h`;
      return `${Math.round(h/24)}d`;
    }
    function tagPills(tags=[]){ return !tags?.length ? '' : `<span class="card-tags">${tags.join(' ¬∑ ')}</span>`; }
    function prettyHost(host=''){ return String(host||'').replace(/^www\./,''); }

    function formatDate(iso) {
      try {
        const d = new Date(iso);
        return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      } catch { return ''; }
    }
    // --- Source badges ---
    const SOURCE_BADGES = {
      'privatedebtinvestor.com': {label:'PDI', cls:'pdi'},
      'hedgeweek.com': {label:'Hedgeweek', cls:'hedgeweek'},
      'alpha-week.com': {label:'AlphaWeek', cls:'alphaweek'},
      'livewiremarkets.com': {label:'Livewire', cls:'livewire'},
      'privatemarketsreview.substack.com': {label:'PM Review', cls:'pmreview'},
      'privatemarketsmagazine.com': {label:'PM Magazine', cls:'pmmag'},
      'globalcapital.com': {label:'GlobalCapital', cls:'globalcapital'},
      'reuters.com': {label:'Reuters', cls:'reuters'},
      'bloomberg.com': {label:'Bloomberg', cls:'bloomberg'},
      'ft.com': {label:'FT', cls:'ft'},
      'wsj.com': {label:'WSJ', cls:'wsj'},
      'barrons.com': {label:"Barron's", cls:'barrons'},
      'spglobal.com': {label:'S&P Global', cls:'spglobal'},
      'altcreditinvestor.com': {label:'Alt Credit Investor', cls:'aci'},
      'prnewswire.com': {label:'PR Newswire', cls:'other'},
      'businesswire.com': {label:'BusinessWire', cls:'other'},
      'globenewswire.com': {label:'GlobeNewswire', cls:'other'},
      'moodys.com': {label:"Moody's", cls:'other'},
      'ratings.spglobal.com': {label:'S&P Ratings', cls:'spglobal'},
      'sec.gov': {label:'SEC EDGAR', cls:'other'},
      'courtlistener.com': {label:'CourtListener', cls:'other'},
      'kkr.com': {label:'KKR', cls:'other'},
      'apollo.com': {label:'Apollo', cls:'other'},
      'blackstone.com': {label:'Blackstone', cls:'other'},
      'carlyle.com': {label:'Carlyle', cls:'other'},
      'aresmgmt.com': {label:'Ares', cls:'other'},
      'barings.com': {label:'Barings', cls:'other'},
      'golubcapital.com': {label:'Golub', cls:'other'},
      'blueowl.com': {label:'Blue Owl', cls:'other'},
      'hpspartners.com': {label:'HPS', cls:'other'},
      'antares.com': {label:'Antares', cls:'other'},
      'monroecap.com': {label:'Monroe', cls:'other'}
    };
    const PAYWALLED = new Set(['ft.com','wsj.com','barrons.com']);
    function badgeHTML(host=''){
      const key = prettyHost(host);
      const meta = SOURCE_BADGES[key] || {label: key || 'Source', cls: 'other'};
      const lock = PAYWALLED.has(key) ? '<span class="lock">üîí</span>' : '';
      return `<span class="badge badge--${meta.cls}" title="${meta.label}">${meta.label}${lock}</span>`;
    }

    // --- URL + publisher helpers ---
    function rewriteGoogleNewsUrl(u=''){
      try{
        const url = new URL(u);
        if (url.hostname.endsWith('news.google.com')){
          const orig = url.searchParams.get('url') || url.searchParams.get('q');
          if (orig){ try { return decodeURIComponent(orig); } catch { return orig; } }
        }
      }catch{}
      return u;
    }
    function cleanTitle(title=''){
      const parts = String(title).split(/\s[-‚Äì‚Äî]\s/);
      return parts.length >= 2 ? parts.slice(0, -1).join(' - ').trim() : String(title).trim();
    }
    function extractPublisherFromTitle(title=''){
      const parts = String(title).split(/\s[-‚Äì‚Äî]\s/);
      if (parts.length >= 2){
        const tail = parts[parts.length - 1].trim();
        if (tail && tail.length <= 50 && !/google/i.test(tail)) return tail;
      }
      return '';
    }
    function publisherHost(i){
      const source = prettyHost(i?.source || '');
      if (source && source !== 'news.google.com') return source;
      let host = '';
      try { host = new URL(rewriteGoogleNewsUrl(i?.url || '')).hostname; } catch {}
      host = prettyHost(host);
      if (host && host !== 'news.google.com') return host;
      const fromTitle = extractPublisherFromTitle(i?.title || '');
      return fromTitle || (source || host || 'Source');
    }

    // --- Tags ---
    const TAG_ALIASES = {
      "pe":"Private Equity","private-equity":"Private Equity","private equity":"Private Equity",
      "re":"Real Estate","real-estate":"Real Estate","real estate":"Real Estate",
      "infra":"Infrastructure","infrastructure":"Infrastructure",
      "em":"Emerging Markets","emerging-markets":"Emerging Markets","emerging markets":"Emerging Markets",
      "direct lending":"Direct Lending","clo":"CLO","nav":"NAV","bdc":"BDC","abs":"ABS"
    };
    function normalizeTag(s=""){ const k = String(s).trim().toLowerCase(); return TAG_ALIASES[k] || s; }
    function toTagArray(t){ if (Array.isArray(t)) return t; if (typeof t === 'string') return t.split(',').map(x=>x.trim()).filter(Boolean); return []; }
    function inferTagsFromText(text=""){
      const t = text.toLowerCase(); const out = new Set();
      if (/(private\s*equity|\bpe\b|buyout|leveraged buyout|sponsor-backed)/.test(t)) out.add("Private Equity");
      if (/(real\s*estate|\breit\b|multifamily|office|industrial|property|mortgage|construction loan)/.test(t)) out.add("Real Estate");
      if (/(infrastructure|data center|renewable|solar|wind|transmission|toll road|airport|port|pipeline)/.test(t)) out.add("Infrastructure");
      if (/(emerging markets|\bem\b|latam|latin america|india|asean|africa|mena|ceemea|turkey|brazil|mexico)/.test(t)) out.add("Emerging Markets");
      if (/(direct lending)/.test(t)) out.add("Direct Lending");
      if (/\bclo\b/.test(t)) out.add("CLO");
      if (/\bnav\b/.test(t)) out.add("NAV");
      if (/\bbdc\b/.test(t)) out.add("BDC");
      if (/\babs\b/.test(t)) out.add("ABS");
      return Array.from(out);
    }

    // --- Renderers ---
    function renderTop10(items){
      const el = document.getElementById('top10');
      el.innerHTML = (items||[]).slice(0,10).map(i=>{
        const host = publisherHost(i);
        const when = timeAgo(i.published_at || i.pubDate || Date.now());
        const href = i.url || '#';
        return `
          <a class="card" href="${href}" target="_blank" rel="noopener">
            <div class="card-title">${cleanTitle(i.title||'')}</div>
            <div class="card-meta">${badgeHTML(host)} <strong>${host}</strong> ¬∑ ${when} ¬∑ ${formatDate(i.published_at)}</div>
            ${tagPills(i.tags)}
          </a>`;
      }).join('');
    }
    function renderFeed(items){
      const el = document.getElementById('feed');
      el.innerHTML = (items||[]).map(i=>{
        const host = publisherHost(i);
        const when = timeAgo(i.published_at || i.pubDate || Date.now());
        const href = i.url || '#';
        return `
          <a href="${href}" target="_blank" rel="noopener">
            <span>${badgeHTML(host)}${cleanTitle(i.title||'')}</span>
            <span class="right">${host} ¬∑ ${when} ¬∑ ${formatDate(i.published_at)}</span>
          </a>`;
      }).join('');
    }

    // --- Filter ---
    function getSelectedTag(){
      const active = document.querySelector('#filters .pill.pill--active');
      return active ? active.dataset.tag : 'All';
    }
    // --- Deal filter helpers ---
    function isDealHeadline(text = '') {
      // Match common deal/financing keywords
      return /(deal|financing|loan|facility|term loan|credit agreement|raises|closes|priced|private credit|investment|funding)/i.test(text);
    }
    
    function isRecent(iso) {
      const d = new Date(iso);
      const days = (Date.now() - d.getTime()) / (1000 * 60 * 60 * 24);
      return days <= 14; // past 2 weeks
    }
  
    function applyFilter(tag = getSelectedTag()){
      const includeSEC = document.getElementById('toggle-sec')?.checked !== false;
    
      // start from all items
      let filtered = _items;
    
      // tag filter
      const selected = normalizeTag(tag);
      // --- New Deals custom filter ---
      if (selected === 'New Deals') {
        filtered = _items.filter(i =>
          isDealHeadline(`${i.title} ${i.description || ''}`) &&
          isRecent(i.published_at)
        );
      }

      if (selected !== 'All' && selected !== 'New Deals') {
        filtered = filtered.filter(i =>
          toTagArray(i.tags).map(t => normalizeTag(t)).includes(selected)
        );
      }
    
      // split into non-SEC and SEC
      const nonSec = filtered.filter(i => (i.source || '').replace(/^www\./,'') !== 'sec.gov');
      const sec    = filtered.filter(i => (i.source || '').replace(/^www\./,'') === 'sec.gov');
    
      // build ordered list: non-SEC first, SEC after (if toggle is on)
      const ordered = includeSEC ? [...nonSec, ...sec] : nonSec;
    
      // render
      renderTop10(ordered);
      renderFeed(ordered.slice(10, 280));
    }

    // --- Item normalizer ---
    function massageItem(raw = {}) {
      const url = rewriteGoogleNewsUrl(raw.url || '');
      const published = raw.published_at || raw.pubDate || raw.date || null;
      let published_at;
      if (published) {
        const d = new Date(published);
        if (!isNaN(d.getTime())) published_at = d.toISOString();
      }
      const tags = toTagArray(raw.tags || []);
      return { ...raw, url, published_at, tags };
    }

    // --- Data load (tolerant of payload shapes) ---
    function normalizeFeedData(data) {
      if (!data) return [];
      if (Array.isArray(data)) return data;
      if (Array.isArray(data.items) && data.items.length) return data.items;
      if (Array.isArray(data.top10) && data.top10.length) return data.top10;
      if (data.title && data.url) return [data];
      return [];
    }

    async function loadFeed(){
      if (_loader) _loader.style.display = 'flex'; // show while fetching
      try{
        const url = `${API}?ts=${Date.now()}`;
        const res = await fetch(url, { cache: 'no-store' });
        if (!res.ok) throw new Error(`Feed HTTP ${res.status}`);
        const data = await res.json();
  
        const rawItems = normalizeFeedData(data);
        console.log('Feed counts', { items: rawItems.length, apiKeys: Object.keys(data) });
  
        if (!rawItems.length) {
          const feed = document.getElementById('feed');
          if (feed) {
            feed.innerHTML = `
              <div style="color:#6b7280">No stories available right now.</div>
              <div><a href="${url}" target="_blank" rel="noopener">Open raw API response</a></div>
            `;
          }
          const top = document.getElementById('top10');
          if (top) top.innerHTML = '';
          if (_loader) _loader.style.display = 'none'; // hide loader even if empty
          return;
        }
  
        _items = rawItems.map(i => {
          const baseTags = toTagArray(i.tags);
          const inferred = inferTagsFromText([i.title, i.summary, i.description].filter(Boolean).join(' '));
          const merged = Array.from(new Set([...baseTags, ...inferred]));
          return massageItem({ ...i, tags: merged });
        }).sort((a,b)=> new Date(b.published_at||b.pubDate||0) - new Date(a.published_at||a.pubDate||0));
  
        applyFilter('All');
        if (_loader) _loader.style.display = 'none'; // hide when done
      }catch(e){
        console.error('Feed load error', e);
        const feed = document.getElementById('feed');
        if (feed) feed.innerHTML = `<div style="color:#b91c1c">‚ö†Ô∏è Failed to load feed: ${e.message}</div>`;
        if (_loader) _loader.textContent = `‚ö†Ô∏è Failed to load feed: ${e.message}`;
      }
    }

    function updateLastUpdated(){
      const now = new Date();
      const formatted = now.toLocaleString('en-US', { hour:'numeric', minute:'2-digit', hour12:true, month:'short', day:'numeric' });
      const el = document.getElementById('last-updated');
      if (el) el.textContent = `Last updated: ${formatted}`;
    }

    // --- Init ---
    document.addEventListener('DOMContentLoaded', () => {
      // tag pills
      document.querySelectorAll('#filters .pill').forEach(btn=>{
        btn.addEventListener('click', () => {
          document.querySelectorAll('#filters .pill').forEach(b=>b.classList.remove('pill--active'));
          btn.classList.add('pill--active');
          applyFilter(btn.dataset.tag);    // re-render on tag change
        });
      });
    
      // SEC toggle
      const secToggle = document.getElementById('toggle-sec');
      if (secToggle) {
        secToggle.addEventListener('change', () => {
          applyFilter(getSelectedTag());   // re-render using current tag
        });
      }
    
      loadFeed().then(updateLastUpdated);
    });
  </script>
  <!-- secure login code -->
  <!-- <script src="/auth-guard.js" data-auth-guard defer></script> -->
</body>
</html>
